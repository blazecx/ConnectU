<template>
    <div class="w-full">
        <div class="flex flex-col gap-5 max-lg:mt-4 last:mb-20 p-3 lg:p-6 lg:px-8 font-display text-white bg-grey rounded-xl lg:rounded-2xl">
            <div class="lg:flex lg:justify-between">
                <div class="lg:flex gap-10">
                    <img :src="userStore.image" alt="" class="block w-36 lg:w-72 max-lg:m-auto rounded-lg">

                    <div class="flex flex-col justify-between max-lg:text-center">
                        <div class="max-lg:mt-5 max-lg:mb-5 lg:text-4xl">
                            {{ userStore.name + ' ' + userStore.surname }}
                        </div>

                        <div class="lg:text-4xl">
                            <div class="lg:mb-5 font-sans">
                                Друзья
                            </div>

                            <div v-if="profile">
                                {{ profile[0].friends }}
                            </div>
                        </div>
                    </div>
                </div>


                <router-link to="profile/setting" class="max-lg:hidden block">
                    <svg viewBox="0 0 49 52" fill="none" class=" w-12 transition-all duration-200 hover:rotate-90">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M24.5005 16.8492C22.1066 16.8492 19.8107 17.8002 18.1179 19.493C16.4251 21.1858 15.4741 23.4817 15.4741 25.8756C15.4741 28.2696 16.4251 30.5655 18.1179 32.2583C19.8107 33.951 22.1066 34.902 24.5005 34.902C26.8945 34.902 29.1904 33.951 30.8831 32.2583C32.5759 30.5655 33.5269 28.2696 33.5269 25.8756C33.5269 23.4817 32.5759 21.1858 30.8831 19.493C29.1904 17.8002 26.8945 16.8492 24.5005 16.8492ZM19.0847 25.8756C19.0847 24.4393 19.6553 23.0617 20.6709 22.0461C21.6866 21.0304 23.0641 20.4598 24.5005 20.4598C25.9369 20.4598 27.3144 21.0304 28.3301 22.0461C29.3458 23.0617 29.9163 24.4393 29.9163 25.8756C29.9163 27.312 29.3458 28.6895 28.3301 29.7052C27.3144 30.7209 25.9369 31.2915 24.5005 31.2915C23.0641 31.2915 21.6866 30.7209 20.6709 29.7052C19.6553 28.6895 19.0847 27.312 19.0847 25.8756Z" fill="white"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M24.4398 0C23.3687 0 22.4757 -4.48346e-08 21.7439 0.0481407C20.996 0.0792871 20.2583 0.233814 19.5608 0.505478C18.7574 0.837865 18.0274 1.32525 17.4124 1.9398C16.7975 2.55435 16.3096 3.28402 15.9767 4.08715C15.6277 4.92961 15.5338 5.82022 15.4953 6.78785C15.4914 7.14173 15.3977 7.48884 15.223 7.79661C15.0483 8.10437 14.7982 8.36271 14.4964 8.54739C14.1856 8.71709 13.8367 8.80502 13.4826 8.80292C13.1285 8.80081 12.7808 8.70874 12.472 8.53536C11.6151 8.08283 10.7967 7.71937 9.89169 7.59902C9.02984 7.48565 8.15409 7.54315 7.31446 7.76824C6.47483 7.99333 5.68776 8.38159 4.99818 8.91085C4.41513 9.37994 3.91337 9.94188 3.51304 10.5741C3.10384 11.1855 2.65613 11.9582 2.12177 12.8849L2.06159 12.9908C1.52482 13.9175 1.07952 14.6902 0.756979 15.3497C0.419994 16.0381 0.15522 16.7169 0.0589381 17.4679C-0.170693 19.2081 0.300315 20.9684 1.36837 22.3614C1.92439 23.0859 2.64891 23.613 3.4673 24.1281C3.77242 24.3085 4.02663 24.5636 4.20601 24.8693C4.38539 25.175 4.48405 25.5213 4.4927 25.8757C4.48405 26.23 4.38539 26.5763 4.20601 26.882C4.02663 27.1877 3.77242 27.4428 3.4673 27.6232C2.64891 28.1383 1.9268 28.6654 1.36837 29.3899C0.839099 30.0795 0.450838 30.8666 0.225753 31.7062C0.000667802 32.5458 -0.0568338 33.4216 0.0565312 34.2834C0.15522 35.0344 0.417587 35.7132 0.754572 36.4016C1.07952 37.0612 1.52482 37.8338 2.06159 38.7605L2.12177 38.8664C2.65613 39.7931 3.10384 40.5658 3.51304 41.1772C3.93908 41.8102 4.39642 42.3807 4.99818 42.8381C5.68758 43.3677 6.47457 43.7564 7.31421 43.9819C8.15384 44.2074 9.02968 44.2653 9.89169 44.1523C10.7967 44.0319 11.6151 43.6709 12.472 43.216C12.7804 43.0428 13.1278 42.9508 13.4814 42.9487C13.8351 42.9466 14.1835 43.0344 14.4939 43.2039C14.7975 43.3872 15.0491 43.6451 15.2248 43.9531C15.4005 44.261 15.4945 44.6089 15.4977 44.9635C15.5338 45.9311 15.6277 46.8217 15.9791 47.6642C16.3115 48.4675 16.7989 49.1975 17.4134 49.8125C18.028 50.4274 18.7576 50.9153 19.5608 51.2482C20.2588 51.5371 20.9809 51.6502 21.7439 51.7008C22.4757 51.7513 23.3687 51.7513 24.4398 51.7513H24.5602C25.6313 51.7513 26.5243 51.7513 27.2561 51.7032C28.0215 51.6502 28.7412 51.5371 29.4392 51.2458C30.2426 50.9134 30.9726 50.4261 31.5876 49.8115C32.2025 49.197 32.6904 48.4673 33.0233 47.6642C33.3723 46.8217 33.4662 45.9311 33.5047 44.9635C33.5082 44.6092 33.6017 44.2616 33.7764 43.9534C33.9511 43.6451 34.2014 43.3864 34.5036 43.2015C34.8146 43.0322 35.1636 42.9447 35.5177 42.9472C35.8718 42.9497 36.2194 43.0422 36.528 43.216C37.3849 43.6685 38.2033 44.0319 39.1083 44.1499C40.8486 44.3795 42.6088 43.9085 44.0018 42.8405C44.6036 42.3783 45.0609 41.8102 45.487 41.1772C45.8962 40.5658 46.3439 39.7931 46.8782 38.8664L46.9384 38.7605C47.4752 37.8338 47.9205 37.0612 48.243 36.4016C48.58 35.7132 48.8448 35.032 48.9411 34.2834C49.1707 32.5432 48.6997 30.783 47.6316 29.3899C47.0756 28.6654 46.3511 28.1383 45.5327 27.6232C45.2276 27.4428 44.9734 27.1877 44.794 26.882C44.6146 26.5763 44.5159 26.23 44.5073 25.8757C44.5073 25.2065 44.8732 24.5422 45.5327 24.1281C46.3511 23.613 47.0732 23.0859 47.6316 22.3614C48.1609 21.6718 48.5492 20.8847 48.7742 20.0451C48.9993 19.2055 49.0568 18.3297 48.9435 17.4679C48.8289 16.7282 48.5931 16.0125 48.2454 15.3497C47.8345 14.5499 47.3986 13.7633 46.9384 12.9908L46.8782 12.8849C46.4385 12.1004 45.9745 11.3298 45.487 10.5741C45.0867 9.94256 44.5849 9.3814 44.0018 8.91326C43.3124 8.38357 42.5254 7.99488 41.6858 7.76938C40.8462 7.54388 39.9703 7.48599 39.1083 7.59902C38.2033 7.71937 37.3849 8.08043 36.528 8.53536C36.2195 8.70831 35.8722 8.80015 35.5186 8.80225C35.1649 8.80436 34.8166 8.71667 34.5061 8.54739C34.2033 8.36329 33.9523 8.10521 33.7767 7.7974C33.6011 7.4896 33.5067 7.14219 33.5023 6.78785C33.4662 5.82022 33.3723 4.92961 33.0209 4.08715C32.6885 3.2838 32.2011 2.5538 31.5866 1.93884C30.972 1.32387 30.2424 0.835997 29.4392 0.503071C28.7412 0.214226 28.0191 0.101096 27.2561 0.0505479C26.5243 6.72519e-08 25.6313 0 24.5602 0H24.4398ZM20.9424 3.83923C21.1277 3.7622 21.4094 3.6924 21.9895 3.65148C22.584 3.61056 23.3542 3.61056 24.5 3.61056C25.6458 3.61056 26.416 3.61056 27.0105 3.65148C27.5906 3.6924 27.8723 3.7622 28.0576 3.83923C28.7966 4.14492 29.3815 4.72983 29.6872 5.46879C29.7834 5.69987 29.8629 6.06333 29.8942 6.92264C29.9664 8.82901 30.9509 10.6656 32.6984 11.6741C34.4459 12.6851 36.528 12.6177 38.2153 11.7271C38.9759 11.3251 39.3298 11.212 39.5801 11.1807C40.371 11.0762 41.171 11.29 41.8042 11.7752C41.9631 11.898 42.1653 12.1074 42.4902 12.5888C42.8248 13.0847 43.2099 13.7514 43.7828 14.7431C44.3557 15.7348 44.7384 16.404 45.0007 16.9383C45.2583 17.4607 45.3377 17.7399 45.3618 17.9397C45.4663 18.7305 45.2524 19.5305 44.7673 20.1638C44.6132 20.3635 44.3388 20.6139 43.6119 21.0712C41.9944 22.087 40.8967 23.8586 40.8967 25.8757C40.8967 27.8928 41.9944 29.6643 43.6119 30.6801C44.3388 31.1374 44.6132 31.3878 44.7673 31.5876C45.2535 32.2206 45.4653 33.0197 45.3618 33.8117C45.3377 34.0114 45.2559 34.2931 45.0007 34.813C44.7384 35.3498 44.3557 36.0165 43.7828 37.0082C43.2099 37.9999 42.8224 38.6667 42.4902 39.1625C42.1653 39.6439 41.9631 39.8533 41.8042 39.9761C41.171 40.4613 40.371 40.6751 39.5801 40.5706C39.3298 40.5393 38.9783 40.4262 38.2153 40.0242C36.5304 39.1336 34.4459 39.0662 32.6984 40.0748C30.9509 41.0857 29.9664 42.9223 29.8942 44.8287C29.8629 45.688 29.7834 46.0514 29.6872 46.2825C29.536 46.6479 29.3142 46.9799 29.0346 47.2595C28.755 47.5391 28.423 47.7609 28.0576 47.9121C27.8723 47.9891 27.5906 48.0589 27.0105 48.0998C26.416 48.1408 25.6458 48.1408 24.5 48.1408C23.3542 48.1408 22.584 48.1408 21.9895 48.0998C21.4094 48.0589 21.1277 47.9891 20.9424 47.9121C20.577 47.7609 20.245 47.5391 19.9654 47.2595C19.6858 46.9799 19.464 46.6479 19.3128 46.2825C19.2166 46.0514 19.1371 45.688 19.1058 44.8287C19.0336 42.9223 18.0491 41.0857 16.3016 40.0772C14.5541 39.0662 12.472 39.1336 10.7847 40.0242C10.0241 40.4262 9.67024 40.5393 9.41991 40.5706C8.62904 40.6751 7.82904 40.4613 7.19581 39.9761C7.03694 39.8533 6.83475 39.6439 6.5098 39.1625C6.05706 38.4578 5.626 37.7393 5.21722 37.0082C4.64435 36.0165 4.26163 35.3474 3.99926 34.813C3.74171 34.2907 3.66227 34.0114 3.6382 33.8117C3.5337 33.0208 3.74755 32.2208 4.23274 31.5876C4.38679 31.3878 4.66119 31.1374 5.38812 30.6801C7.00565 29.6643 8.10326 27.8928 8.10326 25.8757C8.10326 23.8586 7.00565 22.087 5.38812 21.0712C4.66119 20.6139 4.38679 20.3635 4.23274 20.1638C3.74755 19.5305 3.5337 18.7305 3.6382 17.9397C3.66227 17.7399 3.74411 17.4582 3.99926 16.9383C4.26163 16.4016 4.64435 15.7348 5.21722 14.7431C5.7901 13.7514 6.17763 13.0847 6.5098 12.5888C6.83475 12.1074 7.03694 11.898 7.19581 11.7752C7.82904 11.29 8.62904 11.0762 9.41991 11.1807C9.67024 11.212 10.0217 11.3251 10.7847 11.7271C12.4696 12.6177 14.5541 12.6851 16.3016 11.6741C18.0491 10.6656 19.0336 8.82901 19.1058 6.92264C19.1371 6.06333 19.2166 5.69987 19.3128 5.46879C19.6185 4.72983 20.2034 4.14492 20.9424 3.83923Z" fill="white"/>
                    </svg>
                </router-link>
            </div>

            <router-link to="profile/setting" class="lg:hidden flex justify-center items-center gap-4 font-sans text-center text-grey p-2 bg-white rounded-xl">
                Настройки

                <svg viewBox="0 0 49 52" fill="none" class=" w-6">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M24.5005 16.8492C22.1066 16.8492 19.8107 17.8002 18.1179 19.493C16.4251 21.1858 15.4741 23.4817 15.4741 25.8756C15.4741 28.2696 16.4251 30.5655 18.1179 32.2583C19.8107 33.951 22.1066 34.902 24.5005 34.902C26.8945 34.902 29.1904 33.951 30.8831 32.2583C32.5759 30.5655 33.5269 28.2696 33.5269 25.8756C33.5269 23.4817 32.5759 21.1858 30.8831 19.493C29.1904 17.8002 26.8945 16.8492 24.5005 16.8492ZM19.0847 25.8756C19.0847 24.4393 19.6553 23.0617 20.6709 22.0461C21.6866 21.0304 23.0641 20.4598 24.5005 20.4598C25.9369 20.4598 27.3144 21.0304 28.3301 22.0461C29.3458 23.0617 29.9163 24.4393 29.9163 25.8756C29.9163 27.312 29.3458 28.6895 28.3301 29.7052C27.3144 30.7209 25.9369 31.2915 24.5005 31.2915C23.0641 31.2915 21.6866 30.7209 20.6709 29.7052C19.6553 28.6895 19.0847 27.312 19.0847 25.8756Z" fill="black"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M24.4398 0C23.3687 0 22.4757 -4.48346e-08 21.7439 0.0481407C20.996 0.0792871 20.2583 0.233814 19.5608 0.505478C18.7574 0.837865 18.0274 1.32525 17.4124 1.9398C16.7975 2.55435 16.3096 3.28402 15.9767 4.08715C15.6277 4.92961 15.5338 5.82022 15.4953 6.78785C15.4914 7.14173 15.3977 7.48884 15.223 7.79661C15.0483 8.10437 14.7982 8.36271 14.4964 8.54739C14.1856 8.71709 13.8367 8.80502 13.4826 8.80292C13.1285 8.80081 12.7808 8.70874 12.472 8.53536C11.6151 8.08283 10.7967 7.71937 9.89169 7.59902C9.02984 7.48565 8.15409 7.54315 7.31446 7.76824C6.47483 7.99333 5.68776 8.38159 4.99818 8.91085C4.41513 9.37994 3.91337 9.94188 3.51304 10.5741C3.10384 11.1855 2.65613 11.9582 2.12177 12.8849L2.06159 12.9908C1.52482 13.9175 1.07952 14.6902 0.756979 15.3497C0.419994 16.0381 0.15522 16.7169 0.0589381 17.4679C-0.170693 19.2081 0.300315 20.9684 1.36837 22.3614C1.92439 23.0859 2.64891 23.613 3.4673 24.1281C3.77242 24.3085 4.02663 24.5636 4.20601 24.8693C4.38539 25.175 4.48405 25.5213 4.4927 25.8757C4.48405 26.23 4.38539 26.5763 4.20601 26.882C4.02663 27.1877 3.77242 27.4428 3.4673 27.6232C2.64891 28.1383 1.9268 28.6654 1.36837 29.3899C0.839099 30.0795 0.450838 30.8666 0.225753 31.7062C0.000667802 32.5458 -0.0568338 33.4216 0.0565312 34.2834C0.15522 35.0344 0.417587 35.7132 0.754572 36.4016C1.07952 37.0612 1.52482 37.8338 2.06159 38.7605L2.12177 38.8664C2.65613 39.7931 3.10384 40.5658 3.51304 41.1772C3.93908 41.8102 4.39642 42.3807 4.99818 42.8381C5.68758 43.3677 6.47457 43.7564 7.31421 43.9819C8.15384 44.2074 9.02968 44.2653 9.89169 44.1523C10.7967 44.0319 11.6151 43.6709 12.472 43.216C12.7804 43.0428 13.1278 42.9508 13.4814 42.9487C13.8351 42.9466 14.1835 43.0344 14.4939 43.2039C14.7975 43.3872 15.0491 43.6451 15.2248 43.9531C15.4005 44.261 15.4945 44.6089 15.4977 44.9635C15.5338 45.9311 15.6277 46.8217 15.9791 47.6642C16.3115 48.4675 16.7989 49.1975 17.4134 49.8125C18.028 50.4274 18.7576 50.9153 19.5608 51.2482C20.2588 51.5371 20.9809 51.6502 21.7439 51.7008C22.4757 51.7513 23.3687 51.7513 24.4398 51.7513H24.5602C25.6313 51.7513 26.5243 51.7513 27.2561 51.7032C28.0215 51.6502 28.7412 51.5371 29.4392 51.2458C30.2426 50.9134 30.9726 50.4261 31.5876 49.8115C32.2025 49.197 32.6904 48.4673 33.0233 47.6642C33.3723 46.8217 33.4662 45.9311 33.5047 44.9635C33.5082 44.6092 33.6017 44.2616 33.7764 43.9534C33.9511 43.6451 34.2014 43.3864 34.5036 43.2015C34.8146 43.0322 35.1636 42.9447 35.5177 42.9472C35.8718 42.9497 36.2194 43.0422 36.528 43.216C37.3849 43.6685 38.2033 44.0319 39.1083 44.1499C40.8486 44.3795 42.6088 43.9085 44.0018 42.8405C44.6036 42.3783 45.0609 41.8102 45.487 41.1772C45.8962 40.5658 46.3439 39.7931 46.8782 38.8664L46.9384 38.7605C47.4752 37.8338 47.9205 37.0612 48.243 36.4016C48.58 35.7132 48.8448 35.032 48.9411 34.2834C49.1707 32.5432 48.6997 30.783 47.6316 29.3899C47.0756 28.6654 46.3511 28.1383 45.5327 27.6232C45.2276 27.4428 44.9734 27.1877 44.794 26.882C44.6146 26.5763 44.5159 26.23 44.5073 25.8757C44.5073 25.2065 44.8732 24.5422 45.5327 24.1281C46.3511 23.613 47.0732 23.0859 47.6316 22.3614C48.1609 21.6718 48.5492 20.8847 48.7742 20.0451C48.9993 19.2055 49.0568 18.3297 48.9435 17.4679C48.8289 16.7282 48.5931 16.0125 48.2454 15.3497C47.8345 14.5499 47.3986 13.7633 46.9384 12.9908L46.8782 12.8849C46.4385 12.1004 45.9745 11.3298 45.487 10.5741C45.0867 9.94256 44.5849 9.3814 44.0018 8.91326C43.3124 8.38357 42.5254 7.99488 41.6858 7.76938C40.8462 7.54388 39.9703 7.48599 39.1083 7.59902C38.2033 7.71937 37.3849 8.08043 36.528 8.53536C36.2195 8.70831 35.8722 8.80015 35.5186 8.80225C35.1649 8.80436 34.8166 8.71667 34.5061 8.54739C34.2033 8.36329 33.9523 8.10521 33.7767 7.7974C33.6011 7.4896 33.5067 7.14219 33.5023 6.78785C33.4662 5.82022 33.3723 4.92961 33.0209 4.08715C32.6885 3.2838 32.2011 2.5538 31.5866 1.93884C30.972 1.32387 30.2424 0.835997 29.4392 0.503071C28.7412 0.214226 28.0191 0.101096 27.2561 0.0505479C26.5243 6.72519e-08 25.6313 0 24.5602 0H24.4398ZM20.9424 3.83923C21.1277 3.7622 21.4094 3.6924 21.9895 3.65148C22.584 3.61056 23.3542 3.61056 24.5 3.61056C25.6458 3.61056 26.416 3.61056 27.0105 3.65148C27.5906 3.6924 27.8723 3.7622 28.0576 3.83923C28.7966 4.14492 29.3815 4.72983 29.6872 5.46879C29.7834 5.69987 29.8629 6.06333 29.8942 6.92264C29.9664 8.82901 30.9509 10.6656 32.6984 11.6741C34.4459 12.6851 36.528 12.6177 38.2153 11.7271C38.9759 11.3251 39.3298 11.212 39.5801 11.1807C40.371 11.0762 41.171 11.29 41.8042 11.7752C41.9631 11.898 42.1653 12.1074 42.4902 12.5888C42.8248 13.0847 43.2099 13.7514 43.7828 14.7431C44.3557 15.7348 44.7384 16.404 45.0007 16.9383C45.2583 17.4607 45.3377 17.7399 45.3618 17.9397C45.4663 18.7305 45.2524 19.5305 44.7673 20.1638C44.6132 20.3635 44.3388 20.6139 43.6119 21.0712C41.9944 22.087 40.8967 23.8586 40.8967 25.8757C40.8967 27.8928 41.9944 29.6643 43.6119 30.6801C44.3388 31.1374 44.6132 31.3878 44.7673 31.5876C45.2535 32.2206 45.4653 33.0197 45.3618 33.8117C45.3377 34.0114 45.2559 34.2931 45.0007 34.813C44.7384 35.3498 44.3557 36.0165 43.7828 37.0082C43.2099 37.9999 42.8224 38.6667 42.4902 39.1625C42.1653 39.6439 41.9631 39.8533 41.8042 39.9761C41.171 40.4613 40.371 40.6751 39.5801 40.5706C39.3298 40.5393 38.9783 40.4262 38.2153 40.0242C36.5304 39.1336 34.4459 39.0662 32.6984 40.0748C30.9509 41.0857 29.9664 42.9223 29.8942 44.8287C29.8629 45.688 29.7834 46.0514 29.6872 46.2825C29.536 46.6479 29.3142 46.9799 29.0346 47.2595C28.755 47.5391 28.423 47.7609 28.0576 47.9121C27.8723 47.9891 27.5906 48.0589 27.0105 48.0998C26.416 48.1408 25.6458 48.1408 24.5 48.1408C23.3542 48.1408 22.584 48.1408 21.9895 48.0998C21.4094 48.0589 21.1277 47.9891 20.9424 47.9121C20.577 47.7609 20.245 47.5391 19.9654 47.2595C19.6858 46.9799 19.464 46.6479 19.3128 46.2825C19.2166 46.0514 19.1371 45.688 19.1058 44.8287C19.0336 42.9223 18.0491 41.0857 16.3016 40.0772C14.5541 39.0662 12.472 39.1336 10.7847 40.0242C10.0241 40.4262 9.67024 40.5393 9.41991 40.5706C8.62904 40.6751 7.82904 40.4613 7.19581 39.9761C7.03694 39.8533 6.83475 39.6439 6.5098 39.1625C6.05706 38.4578 5.626 37.7393 5.21722 37.0082C4.64435 36.0165 4.26163 35.3474 3.99926 34.813C3.74171 34.2907 3.66227 34.0114 3.6382 33.8117C3.5337 33.0208 3.74755 32.2208 4.23274 31.5876C4.38679 31.3878 4.66119 31.1374 5.38812 30.6801C7.00565 29.6643 8.10326 27.8928 8.10326 25.8757C8.10326 23.8586 7.00565 22.087 5.38812 21.0712C4.66119 20.6139 4.38679 20.3635 4.23274 20.1638C3.74755 19.5305 3.5337 18.7305 3.6382 17.9397C3.66227 17.7399 3.74411 17.4582 3.99926 16.9383C4.26163 16.4016 4.64435 15.7348 5.21722 14.7431C5.7901 13.7514 6.17763 13.0847 6.5098 12.5888C6.83475 12.1074 7.03694 11.898 7.19581 11.7752C7.82904 11.29 8.62904 11.0762 9.41991 11.1807C9.67024 11.212 10.0217 11.3251 10.7847 11.7271C12.4696 12.6177 14.5541 12.6851 16.3016 11.6741C18.0491 10.6656 19.0336 8.82901 19.1058 6.92264C19.1371 6.06333 19.2166 5.69987 19.3128 5.46879C19.6185 4.72983 20.2034 4.14492 20.9424 3.83923Z" fill="black"/>
                </svg>
            </router-link>

        </div>

        <div @click="openModal" class="mt-4 lg:mt-10 flex justify-center gap-3 lg:gap-5 p-2 lg:py-4 text-white lg:text-3xl border-white border-2 lg:border-[3px] rounded-lg lg:rounded-xl cursor-pointer transition-all duration-100 hover:bg-white hover:text-light-black group">
            <svg viewBox="0 0 43 43" fill="none" class="w-5 lg:w-7">
                <path d="M39.9286 24.5714H24.5714V39.9286C24.5714 40.7432 24.2478 41.5244 23.6718 42.1004C23.0958 42.6764 22.3146 43 21.5 43C20.6854 43 19.9042 42.6764 19.3282 42.1004C18.7522 41.5244 18.4286 40.7432 18.4286 39.9286V24.5714H3.07143C2.25683 24.5714 1.47561 24.2478 0.899601 23.6718C0.323597 23.0958 0 22.3146 0 21.5C0 20.6854 0.323597 19.9042 0.899601 19.3282C1.47561 18.7522 2.25683 18.4286 3.07143 18.4286H18.4286V3.07143C18.4286 2.25684 18.7522 1.4756 19.3282 0.8996C19.9042 0.323595 20.6854 0 21.5 0C22.3146 0 23.0958 0.323595 23.6718 0.8996C24.2478 1.4756 24.5714 2.25684 24.5714 3.07143V18.4286H39.9286C40.7432 18.4286 41.5244 18.7522 42.1004 19.3282C42.6764 19.9042 43 20.6854 43 21.5C43 22.3146 42.6764 23.0958 42.1004 23.6718C41.5244 24.2478 40.7432 24.5714 39.9286 24.5714Z" fill="white" class="group-hover:fill-light-black"/>
            </svg>

            Создать пост
        </div>

        <div v-for="post in posts" :key="post" class="mt-4 lg:mt-10 last:mb-20 font-display text-white bg-grey rounded-xl lg:rounded-2xl">
            <div class="p-3 lg:p-6 lg:px-8 flex justify-between items-center gap-3 lg:gap-5 border-light-grey border-b">
                <div class="flex items-center gap-3">
                    <img :src="userStore.image" alt="" class="w-10 lg:w-20 max-lg:h-10 block rounded-full">

                    <div class="">
                        <div class="text-sm lg:text-3xl font-medium">
                            {{ userStore.name + ' ' + userStore.surname }}
                        </div>

                        <div class="mt-2 lg:mt-3 flex items-center gap-2 lg:gap-4 font-regular text-[10px] lg:text-xl">
                            {{ post.created_at }}
                        </div>
                    </div>
                </div>


                <div class="flex gap-4 lg:gap-8">
                    <div @click="postProp(post)" class="">
                        <svg viewBox="0 0 28 26" fill="none" class="w-[28px] cursor-pointer">
                            <path d="M0 24H28V26H0V24ZM23.4 7C24.2 6.2 24.2 5 23.4 4.2L19.8 0.6C19 -0.2 17.8 -0.2 17 0.6L2 15.6V22H8.4L23.4 7ZM18.4 2L22 5.6L19 8.6L15.4 5L18.4 2ZM4 20V16.4L14 6.4L17.6 10L7.6 20H4Z" fill="white"/>
                        </svg>
                    </div>
    
                    <svg @click="deleteMessage(post.id)" viewBox="0 0 16 18" fill="none" class="w-6 cursor-pointer">
                        <path d="M2.98857 18C2.4781 18 2.04267 17.8204 1.68229 17.4613C1.32267 17.1021 1.14286 16.6672 1.14286 16.1566V2.02029H0V0.878884H4.57143V0H11.4286V0.878884H16V2.02029H14.8571V16.1566C14.8571 16.6817 14.6811 17.12 14.3291 17.4715C13.9764 17.8238 13.5371 18 13.0114 18H2.98857ZM13.7143 2.02029H2.28571V16.1566C2.28571 16.3613 2.35162 16.5295 2.48343 16.6611C2.61524 16.7928 2.78362 16.8586 2.98857 16.8586H13.0114C13.1867 16.8586 13.3478 16.7855 13.4949 16.6394C13.6411 16.4926 13.7143 16.3316 13.7143 16.1566V2.02029ZM5.49486 14.5758H6.63771V4.30311H5.49486V14.5758ZM9.36229 14.5758H10.5051V4.30311H9.36229V14.5758Z" fill="white"/>
                    </svg>
                </div>
                
            </div>

            <div class="p-3 lg:p-8">
                <div class="text-sm lg:text-3xl">
                    {{post.text}}
                </div>

                <div class="flex flex-wrap gap-6">
                    <div  v-for="attachment in post.attachment" :key="attachment">
                        <img v-if="attachment.type == 'photo'" :src="'http://127.0.0.1:8000/images/attachments/' + attachment.name" alt="" class="block w-full lg:w-96 h-max mt-4 lg:mt-10 rounded-md lg:rounded-xl">
                        <iframe v-else allowfullscreen :src="attachment.name" class="lg:w-[600px] lg:h-[300px] mt-4 lg:mt-10"></iframe>
                    </div>
                </div>

                <div class="flex items-center justify-between mt-4 lg:mt-10">
                    <div class="flex gap-2 lg:gap-3  lg:text-3xl" v-if="post.likes.likes == 0">
                        <svg @click="like(post.id)" viewBox="0 0 36 33" fill="none" class="w-[22px] lg:w-10 cursor-pointer">
                            <path d="M18.18 27.9646L18 28.1444L17.802 27.9646C9.252 20.2136 3.6 15.0883 3.6 9.89101C3.6 6.29428 6.3 3.59673 9.9 3.59673C12.672 3.59673 15.372 5.3951 16.326 7.84087H19.674C20.628 5.3951 23.328 3.59673 26.1 3.59673C29.7 3.59673 32.4 6.29428 32.4 9.89101C32.4 15.0883 26.748 20.2136 18.18 27.9646ZM26.1 0C22.968 0 19.962 1.45668 18 3.7406C16.038 1.45668 13.032 0 9.9 0C4.356 0 0 4.33406 0 9.89101C0 16.6708 6.12 22.2278 15.39 30.6262L18 33L20.61 30.6262C29.88 22.2278 36 16.6708 36 9.89101C36 4.33406 31.644 0 26.1 0Z" fill="white"/>
                        </svg>
                    </div>

                    <div class="flex gap-2 lg:gap-3 lg:text-3xl" v-else>
                        <svg v-if="!post.likes.my_like.length" @click="like(post.id)" viewBox="0 0 36 33" fill="none" class="w-[22px] lg:w-10 cursor-pointer">
                            <path d="M18.18 27.9646L18 28.1444L17.802 27.9646C9.252 20.2136 3.6 15.0883 3.6 9.89101C3.6 6.29428 6.3 3.59673 9.9 3.59673C12.672 3.59673 15.372 5.3951 16.326 7.84087H19.674C20.628 5.3951 23.328 3.59673 26.1 3.59673C29.7 3.59673 32.4 6.29428 32.4 9.89101C32.4 15.0883 26.748 20.2136 18.18 27.9646ZM26.1 0C22.968 0 19.962 1.45668 18 3.7406C16.038 1.45668 13.032 0 9.9 0C4.356 0 0 4.33406 0 9.89101C0 16.6708 6.12 22.2278 15.39 30.6262L18 33L20.61 30.6262C29.88 22.2278 36 16.6708 36 9.89101C36 4.33406 31.644 0 26.1 0Z" fill="white"/>
                        </svg>

                        <svg v-else @click="like(post.id)" viewBox="0 0 36 33" fill="none" class="w-[22px] lg:w-10 cursor-pointer">
                            <path d="M18 33L15.39 30.6262C6.12 22.2278 0 16.6708 0 9.89101C0 4.33406 4.356 0 9.9 0C13.032 0 16.038 1.45668 18 3.7406C19.962 1.45668 22.968 0 26.1 0C31.644 0 36 4.33406 36 9.89101C36 16.6708 29.88 22.2278 20.61 30.6262L18 33Z" fill="white"/>
                        </svg>


                        {{ post.likes.likes }}
                    </div>

                    <div class="flex gap-2 lg:gap-4">
                        <div v-for="cat in post.category" :key="cat" class=" h-max p-2 bg-light-black text-white rounded-[4px]">
                            {{ cat.name }}
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

        <PostModal v-if="open" @closeModal="open = false" :post="post" :categoriesRef="categoriesRef" :categoriesIdRef="categoriesIdRef"/>
    </div>
</template>

<script setup>
import axios from 'axios';
import {onMounted, ref, watch} from 'vue'
import { useUserStore } from '../../../store/user-store';
import PostModal from '../../modals/PostModal.vue'
import eventBus from '@/eventBus';

let userStore = useUserStore()

let open = ref(false)

let profile = ref(null)

let posts = ref(null)
let post = ref(null)

let categoriesRef = ref([])
let categoriesIdRef = ref([])
// let imageRef = ref([])
// let videoRef = ref(null)

onMounted(async() => {
    eventBus.on('addPost', async()=>{
        await getPosts()
    })
    await getUser()
    await getPosts()
})

let postProp = (postVal) => {
    categoriesRef.value = []
    categoriesIdRef.value = []

    post.value = postVal

    for (let index = 0; index < post.value.category.length; index++) {
        console.log(post.value.category[index].id);
        categoriesRef.value.push(post.value.category[index])
        categoriesIdRef.value.push(post.value.category[index].category_id)
    }

    // for (let index = 0; index < post.value.attachment.length; index++) {
    //     if (post.value.attachment[index].type == 'photo') {
    //         imageRef.value.push('http://127.0.0.1:8000/images/attachment/' + post.value.attachment[index].name)
    //     } else {
    //         videoRef.value = post.value.attachment[index].name
    //     }
    // }

    open.value = true

}

watch(open, (newValue) => {
    if (newValue) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
})

let like = async(id)=>{
    try {
        let response = await axios.get("http://127.0.0.1:8000/api/like-post/id" + id, {
            headers:
            {
                Authorization: `Bearer ${userStore.token}`,
            }
        });
        getPosts();
        console.log(response + id);

    } catch (error) {
        console.log(error);

    }
}

let openModal = () => {
    post.value = null
    open.value = true
}

let getUser = async () => {
    try {
        let res = await axios('http://127.0.0.1:8000/api/profile', {
            headers:
            {
                Authorization: `Bearer ${userStore.token}`,
            }
        })

        profile.value = res.data.profile

        console.log(res.data.profile)

    } catch (err) {
        console.log(err)
    }
}

let getPosts = async() => {
    try {
        let res = await axios('http://127.0.0.1:8000/api/posts/my', {
            headers:
            {
                Authorization: `Bearer ${userStore.token}`,
            }
        })

        posts.value = res.data.posts

        console.log(res.data)
    } catch (err) {
        console.log(err)
    }
}

let deleteMessage = async(id) => {
    try {
        let res = await axios.delete('http://127.0.0.1:8000/api/posts/delete/id' + id,
        {
            headers:
            {
                Authorization: `Bearer ${userStore.token}`,
            }
        })
        await getPosts();
        console.log(res.data)
    } catch (error) {
        console.log(error)
    }
}
</script>
