<template>
    <nav class="relative lg:fixed lg:inset-x-0 lg:top-0 z-20 lg:flex lg:flex-col bg-light-black px-3 lg:px-72 ">
        <div class="lg:relative container m-auto py-3 lg:py-9">
            <div class="flex justify-between items-center">
                <div>
                    <svg viewBox="0 0 134 118" fill="none" class="w-[50px] lg:w-24">
                        <g clip-path="url(#clip0_3_344)">
                            <path d="M84.6572 2.41492C99.6933 6.80149 117.786 19.0691 121.778 36.7688C124.959 50.8547 116.082 54.5254 117.13 72.4467C118.607 97.7888 137.516 110.278 133.021 116.267C128.141 122.767 107.947 105.249 74.4841 104.88C47.384 104.585 31.9007 115.756 25.73 108.164C19.0895 99.9935 35.5012 85.1973 28.8833 68.759C22.4862 52.8662 2.27011 54.622 0.413248 43.0362C-1.77197 29.3821 24.2128 14.1314 38.5865 8.07428C49.2465 3.58543 65.3752 -3.21035 84.6572 2.41492Z" fill="white" stroke="white" stroke-miterlimit="10"/>
                            <path d="M88.45 62.35C88.45 77.8 81.375 85.525 67.225 85.525C52.875 85.525 45.7 77.8 45.7 62.35V39.175C45.7 36.875 46.425 35.1 47.875 33.85C49.325 32.6 51.025 31.975 52.975 31.975C54.975 31.975 56.675 32.6 58.075 33.85C59.525 35.1 60.25 36.875 60.25 39.175V64.6C60.25 68.9 62.525 71.05 67.075 71.05C71.625 71.05 73.9 68.9 73.9 64.6V39.175C73.9 38.025 74.1 37 74.5 36.1C74.9 35.2 75.425 34.45 76.075 33.85C76.725 33.25 77.475 32.8 78.325 32.5C79.225 32.15 80.15 31.975 81.1 31.975C83.1 31.975 84.825 32.6 86.275 33.85C87.725 35.1 88.45 36.875 88.45 39.175V62.35Z" fill="#303031"/>
                            <path d="M95.6117 94.3545C99.0791 94.3545 101.89 91.5333 101.89 88.0531C101.89 84.5729 99.0791 81.7516 95.6117 81.7516C92.1444 81.7516 89.3335 84.5729 89.3335 88.0531C89.3335 91.5333 92.1444 94.3545 95.6117 94.3545Z" fill="#303031"/>
                            <path d="M108.372 102.679C111.023 102.679 113.173 100.521 113.173 97.8603C113.173 95.1992 111.023 93.0419 108.372 93.0419C105.721 93.0419 103.571 95.1992 103.571 97.8603C103.571 100.521 105.721 102.679 108.372 102.679Z" fill="#303031"/>
                            <path d="M119.055 109.372C120.896 109.372 122.389 107.874 122.389 106.026C122.389 104.177 120.896 102.679 119.055 102.679C117.213 102.679 115.72 104.177 115.72 106.026C115.72 107.874 117.213 109.372 119.055 109.372Z" fill="#303031"/>
                        </g>
                        <defs>
                            <clipPath id="clip0_3_344">
                                <rect width="134" height="118" fill="white"/>
                            </clipPath>
                        </defs>
                    </svg>
                </div>

                <div class="relative flex items-center">
                    <div class="max-lg:hidden w-[72px] lg:w-max lg:mr-4 leading-5 lg:text-5xl text-white">С Новым годом!</div>
                    <img src="../../../../public/icons/free-icon-christmas-tree-2276457.png" alt="" class="w-10 lg:w-14">
                    <svg width="50" viewBox="0 0 58 52" fill="none" class="max-lg:hidden absolute -top-6 right-[110px]">
                        <path d="M41.8636 50.7472H5.09742C2.90781 50.7472 1.13281 48.9722 1.13281 46.7826V38.4002C1.13281 36.2106 2.90781 34.4356 5.09742 34.4356H41.8636C44.0532 34.4356 45.8282 36.2106 45.8282 38.4002V46.7826C45.8282 48.9722 44.0532 50.7472 41.8636 50.7472Z" fill="white"/>
                        <path d="M4.8501 34.431V25.6908C4.8501 12.1277 15.845 1.13269 29.4082 1.13269C42.1645 1.13269 52.6493 10.8587 53.8513 23.2997L45.8285 27.6768C44.1994 26.6838 42.1114 27.8565 42.1114 29.7644V34.4355L4.8501 34.431Z" fill="#EF3C3C"/>
                        <path d="M51.4303 33.7555C54.4332 33.7555 56.8675 31.3212 56.8675 28.3183C56.8675 25.3155 54.4332 22.8812 51.4303 22.8812C48.4275 22.8812 45.9932 25.3155 45.9932 28.3183C45.9932 31.3212 48.4275 33.7555 51.4303 33.7555Z" fill="white"/>
                        <path d="M54.9322 22.7643C54.2331 16.6045 51.3306 10.9188 46.726 6.71428C41.9842 2.38445 35.8337 0 29.4078 0C22.5455 0 16.0939 2.6723 11.2417 7.52458C6.38939 12.3769 3.71709 18.8284 3.71709 25.6907V33.4943C1.57517 34.0979 0 36.0679 0 38.4002V46.7826C0 49.5933 2.28669 51.88 5.09742 51.88H41.8636C44.6743 51.88 46.961 49.5933 46.961 46.7826V38.4002C46.961 36.0679 45.3858 34.0978 43.2439 33.4943V29.7645C43.2439 29.0713 43.7121 28.7335 43.9135 28.6206C44.0711 28.5321 44.4315 28.3769 44.8645 28.486C44.9538 32.0315 47.8636 34.8887 51.4303 34.8887C55.0529 34.8887 58.0002 31.9414 58.0002 28.3188C57.9999 25.9829 56.7737 23.9295 54.9322 22.7643ZM44.6954 38.4002V46.7826C44.6954 48.344 43.425 49.6145 41.8635 49.6145H40.6657V48.1467C40.6657 47.5211 40.1586 47.014 39.533 47.014C38.9074 47.014 38.4003 47.5212 38.4003 48.1467V49.6145H35.2286V48.1467C35.2286 47.5211 34.7214 47.014 34.0959 47.014C33.4702 47.014 32.9632 47.5212 32.9632 48.1467V49.6145H29.7914V48.1467C29.7914 47.5211 29.2843 47.014 28.6587 47.014C28.0331 47.014 27.526 47.5212 27.526 48.1467V49.6145H24.3543V48.1467C24.3543 47.5211 23.8471 47.014 23.2216 47.014C22.5961 47.014 22.0889 47.5212 22.0889 48.1467V49.6145H18.9171V48.1467C18.9171 47.5211 18.41 47.014 17.7844 47.014C17.1589 47.014 16.6517 47.5212 16.6517 48.1467V49.6145H13.48V48.1467C13.48 47.5211 12.9728 47.014 12.3473 47.014C11.7218 47.014 11.2146 47.5212 11.2146 48.1467V49.6145H8.0425V48.1467C8.0425 47.5211 7.53534 47.014 6.9098 47.014C6.28415 47.014 5.77711 47.5212 5.77711 48.1467V49.6145H5.09742C3.53595 49.6145 2.26551 48.3442 2.26551 46.7826V38.4002C2.26551 36.8388 3.53584 35.5683 5.09742 35.5683H41.8636C43.425 35.5683 44.6954 36.8387 44.6954 38.4002ZM42.8039 26.6453C41.6608 27.2872 40.9783 28.4534 40.9783 29.7646V33.3029H5.9826V25.6908C5.9826 12.7741 16.4911 2.26562 29.4079 2.26562C41.0034 2.26562 50.6746 10.5757 52.5187 21.8408C52.1643 21.7815 51.8009 21.7489 51.4299 21.7489C48.5331 21.7489 46.07 23.6342 45.1984 26.2417C44.3934 26.0913 43.5541 26.2239 42.8039 26.6453ZM51.4299 32.6231C49.0565 32.6231 47.1255 30.6921 47.1255 28.3187C47.1255 25.9452 49.0565 24.0142 51.4299 24.0142C53.8034 24.0142 55.7344 25.9452 55.7344 28.3187C55.7344 30.6921 53.8034 32.6231 51.4299 32.6231Z" fill="black"/>
                        <path d="M33.3407 37.2674C32.7151 37.2674 32.208 37.7746 32.208 38.4001C32.208 39.0258 32.7152 39.5328 33.3407 39.5328H40.0984C40.4725 39.5328 40.7768 39.8372 40.7768 40.2114V42.2586C40.7768 42.8843 41.284 43.3913 41.9095 43.3913C42.5352 43.3913 43.0422 42.8841 43.0422 42.2586V40.2114C43.0422 38.5881 41.7216 37.2673 40.0983 37.2673H33.3407V37.2674Z" fill="black"/>
                        <path d="M28.9985 37.2675C28.7006 37.2675 28.4083 37.3887 28.1976 37.5994C27.9869 37.8101 27.8657 38.1023 27.8657 38.4003C27.8657 38.6982 27.9869 38.9905 28.1976 39.2012C28.4083 39.4119 28.7006 39.5331 28.9985 39.5331C29.2965 39.5331 29.5887 39.4119 29.7994 39.2012C30.0101 38.9905 30.1313 38.6982 30.1313 38.4003C30.1313 38.1023 30.0101 37.8101 29.7994 37.5994C29.5886 37.3887 29.2963 37.2675 28.9985 37.2675Z" fill="black"/>
                        <path d="M14.7281 12.1713C14.2954 11.8241 13.5763 11.8007 13.1213 12.3633C12.6665 12.9257 12.8397 13.6242 13.2699 13.9747C13.4668 14.1352 13.7243 14.2281 13.9897 14.2281C14.304 14.2281 14.6294 14.0977 14.8782 13.7946C14.8817 13.7903 14.8853 13.7859 14.8887 13.7816C15.3391 13.2157 15.1608 12.5185 14.7281 12.1713Z" fill="black"/>
                        <path d="M28.9762 4.65945C24.1791 4.75382 19.5177 6.50729 15.8507 9.59726C15.3722 10.0004 15.3112 10.715 15.7143 11.1934C15.9384 11.4594 16.2587 11.5963 16.5811 11.5963C16.8389 11.5963 17.098 11.5089 17.3105 11.3298C20.582 8.57309 24.7409 7.00868 29.0208 6.92451C29.6462 6.91227 30.1433 6.39515 30.1309 5.76972C30.1186 5.1443 29.5997 4.64745 28.9762 4.65945Z" fill="black"/>
                    </svg>
                </div>

                <div class="flex items-center gap-6 lg:gap-16">
                    <div @click="toggleModal(1)" class="cursor-pointer lg:flex lg:items-center lg:gap-3 lg:bg-white transition-all duration-100 text-light-black  lg:hover:bg-light-black lg:hover:text-white lg:border-[4px] border-white group lg:rounded-lg lg:py-3 lg:px-5">
                        <svg viewBox="0 0 30 30" fill="none" class="w-[30px]">
                            <path d="M21.6667 21.6667L27 27M3 13.6667C3 16.4956 4.12381 19.2088 6.12419 21.2091C8.12458 23.2095 10.8377 24.3333 13.6667 24.3333C16.4956 24.3333 19.2088 23.2095 21.2091 21.2091C23.2095 19.2088 24.3333 16.4956 24.3333 13.6667C24.3333 10.8377 23.2095 8.12458 21.2091 6.12419C19.2088 4.12381 16.4956 3 13.6667 3C10.8377 3 8.12458 4.12381 6.12419 6.12419C4.12381 8.12458 3 10.8377 3 13.6667Z" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="lg:stroke-light-black lg:group-hover:stroke-white"/>
                        </svg>

                        <div class="max-lg:hidden text-2xl ">
                            Поиск
                        </div>
                    </div>

                    <div @click="modals[1].visible ? toggleModal(2, true) : toggleModal(2)" :class="userStore.id ? '' : 'py-[6px] lg:p-0 px-2  max-lg:bg-white rounded-md'">
                        <svg v-if="!userStore.id" viewBox="0 0 33 42" fill="none" class="w-6 lg:w-9">
                            <path d="M16.4999 18.6999C21.6637 18.6999 25.8498 14.5138 25.8498 9.34996C25.8498 4.18612 21.6637 0 16.4999 0C11.336 0 7.1499 4.18612 7.1499 9.34996C7.1499 14.5138 11.336 18.6999 16.4999 18.6999Z" fill="#373737" class="lg:fill-white"/>
                            <path d="M16.5 20.9C7.38732 20.9 0 28.2874 0 37.3999C0 39.83 1.96999 41.7999 4.40002 41.7999H28.6C31.03 41.7999 33 39.83 33 37.3999C32.9999 28.2874 25.6126 20.9 16.5 20.9Z" fill="#373737" class="lg:fill-white"/>
                        </svg>

                        <div v-else class="">
                            <img :src="userStore.image" alt="" class="w-8 lg:w-16 rounded-full border-white border-2 cursor-pointer">
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <SearchModal v-if="modals[0].visible" @closeModal="toggleModal(1, true)" />

        <div class="lg:relative container m-auto">
            <UserModal v-if="modals[1].visible" @closeModal="toggleModal(2, true)" />
        </div>

        <LogOrReg v-if="!userStore.id" />
    </nav>
</template>

<script setup>
import { ref } from 'vue'
import Cover from '../reusable/Cover.vue'
import SearchModal from '../modals/SearchModal.vue';
import UserModal from '../modals/UserModal.vue';
import { useUserStore } from '@/store/user-store';
import LogOrReg from '../modals/LogOrReg.vue';

const userStore = useUserStore()


let idOpenModal = ref(0);

let modals = ref([
    {
        id: 1,
        name: 'search',
        visible: false
    },
    {
        id: 2,
        name: 'user',
        visible: false
    }
])

function toggleModal(id, isClose) {
    if (!isClose) {
        if (idOpenModal.value) {
            modals.value[idOpenModal.value - 1].visible = false
        }

        modals.value[id - 1].visible = true
        idOpenModal.value = id
    } else {
        modals.value[id - 1].visible = false
        idOpenModal.value = 0
    }

    if (idOpenModal.value) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }
}



</script>
